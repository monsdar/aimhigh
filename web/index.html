<html>
    <head>
        <title>AimHigh-Test</title>
        <link type='text/css' rel='stylesheet' href='stylesheet.css'>
        <!-- This includes jQuery 1.9.0 from Google -->
        <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
        <!-- Include other required scripts -->
        <script type="text/javascript" src="extends.js"></script>
    </head>
    <body>
        <div class='category'>
        </div>
        <script type="text/javascript">
            $(document).ready(function()
            {
                //get the userKey
                var userKey = $.getUserKey();
                                
                //if the userkey is empty, we need to create a new user here
                if(userKey == '')
                {
                    //TODO: Create a new user here
                    userKey = 'TestUser';
                }
                
                //let's query the aimhigh-interface for content
                var aimHigh="http://aimhigh.nilsbrinkmann.com/interface.php";
                var postVars = {userkey: userKey, request: 'getTasks'};
                $.post(aimHigh, postVars, function(data) {
                    var json = $.parseJSON(data);
                    $.each(json, function(i, item)
                    {
                        $('.category').append('<div class="task" id="#id' + item.index + '"><p>' + item.text + '</p></div>');
                    });
                });
                
                $(document).on('mouseenter', '.task', function() {
                    $(this).css('background-color', '#8BC48B');
                });
                
                $(document).on('mouseleave', '.task', function() {
                    $(this).css('background-color', '#dedede');
                });
                
                $(document).on('click', '.task', function() {
                    $(this).toggleClass('solvedTask');
                });
            });
                
	</script>
    </body>
</html>
